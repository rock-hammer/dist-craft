import{J as M,K as me,L as D,M as y,N as z,O as $e,U as ne,P as te,Q as re,R as ae,T as L,V as Ie,b as q,W as X,X as Be,Y as ye,Z as Le,d as Me,$ as De,a0 as _e,a1 as ve,w as P,a2 as Fe,a3 as He,a4 as Ge,k as Ne,a5 as We,a6 as Ue}from"./file-9d6263df.js";import{a8 as qe,a9 as ze,aa as we,d as x,E as p,o as w,c as A,x as O,i as c,q as E,U as Y,e as F,a2 as Z,b as Xe,_ as b,z as H,a0 as Ye,l as Re,w as S,a as N,F as se,f as Ze,a3 as Ke,a4 as Je,y as Qe}from"./index-b0694976.js";var Ve="[object Symbol]";function K(e){return typeof e=="symbol"||M(e)&&me(e)==Ve}function Ce(e,n){for(var t=-1,r=e==null?0:e.length,a=Array(r);++t<r;)a[t]=n(e[t],t,e);return a}var ke=1/0,ie=D?D.prototype:void 0,oe=ie?ie.toString:void 0;function xe(e){if(typeof e=="string")return e;if(y(e))return Ce(e,xe)+"";if(K(e))return oe?oe.call(e):"";var n=e+"";return n=="0"&&1/e==-ke?"-0":n}function je(e){return e}var en=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,nn=/^\w*$/;function J(e,n){if(y(e))return!1;var t=typeof e;return t=="number"||t=="symbol"||t=="boolean"||e==null||K(e)?!0:nn.test(e)||!en.test(e)||n!=null&&e in Object(n)}var tn="Expected a function";function Q(e,n){if(typeof e!="function"||n!=null&&typeof n!="function")throw new TypeError(tn);var t=function(){var r=arguments,a=n?n.apply(this,r):r[0],s=t.cache;if(s.has(a))return s.get(a);var f=e.apply(this,r);return t.cache=s.set(a,f)||s,f};return t.cache=new(Q.Cache||z),t}Q.Cache=z;var rn=500;function an(e){var n=Q(e,function(r){return t.size===rn&&t.clear(),r}),t=n.cache;return n}var sn=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,on=/\\(\\)?/g,fn=an(function(e){var n=[];return e.charCodeAt(0)===46&&n.push(""),e.replace(sn,function(t,r,a,s){n.push(a?s.replace(on,"$1"):r||t)}),n});const un=fn;function ln(e){return e==null?"":xe(e)}function V(e,n){return y(e)?e:J(e,n)?[e]:un(ln(e))}var cn=1/0;function T(e){if(typeof e=="string"||K(e))return e;var n=e+"";return n=="0"&&1/e==-cn?"-0":n}function Ae(e,n){n=V(n,e);for(var t=0,r=n.length;e!=null&&t<r;)e=e[T(n[t++])];return t&&t==r?e:void 0}function k(e,n,t){var r=e==null?void 0:Ae(e,n);return r===void 0?t:r}var dn="__lodash_hash_undefined__";function pn(e){return this.__data__.set(e,dn),this}function gn(e){return this.__data__.has(e)}function G(e){var n=-1,t=e==null?0:e.length;for(this.__data__=new z;++n<t;)this.add(e[n])}G.prototype.add=G.prototype.push=pn;G.prototype.has=gn;function hn(e,n){for(var t=-1,r=e==null?0:e.length;++t<r;)if(n(e[t],t,e))return!0;return!1}function mn(e,n){return e.has(n)}var yn=1,_n=2;function Se(e,n,t,r,a,s){var f=t&yn,i=e.length,o=n.length;if(i!=o&&!(f&&o>i))return!1;var u=s.get(e),l=s.get(n);if(u&&l)return u==n&&l==e;var g=-1,d=!0,_=t&_n?new G:void 0;for(s.set(e,n),s.set(n,e);++g<i;){var h=e[g],m=n[g];if(r)var v=f?r(m,h,g,n,e,s):r(h,m,g,e,n,s);if(v!==void 0){if(v)continue;d=!1;break}if(_){if(!hn(n,function(R,C){if(!mn(_,C)&&(h===R||a(h,R,t,r,s)))return _.push(C)})){d=!1;break}}else if(!(h===m||a(h,m,t,r,s))){d=!1;break}}return s.delete(e),s.delete(n),d}function vn(e){var n=-1,t=Array(e.size);return e.forEach(function(r,a){t[++n]=[a,r]}),t}function wn(e){var n=-1,t=Array(e.size);return e.forEach(function(r){t[++n]=r}),t}var Rn=1,Cn=2,xn="[object Boolean]",An="[object Date]",Sn="[object Error]",Pn="[object Map]",On="[object Number]",En="[object RegExp]",bn="[object Set]",Tn="[object String]",$n="[object Symbol]",In="[object ArrayBuffer]",Bn="[object DataView]",fe=D?D.prototype:void 0,W=fe?fe.valueOf:void 0;function Ln(e,n,t,r,a,s,f){switch(t){case Bn:if(e.byteLength!=n.byteLength||e.byteOffset!=n.byteOffset)return!1;e=e.buffer,n=n.buffer;case In:return!(e.byteLength!=n.byteLength||!s(new ne(e),new ne(n)));case xn:case An:case On:return $e(+e,+n);case Sn:return e.name==n.name&&e.message==n.message;case En:case Tn:return e==n+"";case Pn:var i=vn;case bn:var o=r&Rn;if(i||(i=wn),e.size!=n.size&&!o)return!1;var u=f.get(e);if(u)return u==n;r|=Cn,f.set(e,n);var l=Se(i(e),i(n),r,a,s,f);return f.delete(e),l;case $n:if(W)return W.call(e)==W.call(n)}return!1}var Mn=1,Dn=Object.prototype,Fn=Dn.hasOwnProperty;function Hn(e,n,t,r,a,s){var f=t&Mn,i=te(e),o=i.length,u=te(n),l=u.length;if(o!=l&&!f)return!1;for(var g=o;g--;){var d=i[g];if(!(f?d in n:Fn.call(n,d)))return!1}var _=s.get(e),h=s.get(n);if(_&&h)return _==n&&h==e;var m=!0;s.set(e,n),s.set(n,e);for(var v=f;++g<o;){d=i[g];var R=e[d],C=n[d];if(r)var ee=f?r(C,R,d,n,e,s):r(R,C,d,e,n,s);if(!(ee===void 0?R===C||a(R,C,t,r,s):ee)){m=!1;break}v||(v=d=="constructor")}if(m&&!v){var $=e.constructor,I=n.constructor;$!=I&&"constructor"in e&&"constructor"in n&&!(typeof $=="function"&&$ instanceof $&&typeof I=="function"&&I instanceof I)&&(m=!1)}return s.delete(e),s.delete(n),m}var Gn=1,ue="[object Arguments]",le="[object Array]",B="[object Object]",Nn=Object.prototype,ce=Nn.hasOwnProperty;function Wn(e,n,t,r,a,s){var f=y(e),i=y(n),o=f?le:re(e),u=i?le:re(n);o=o==ue?B:o,u=u==ue?B:u;var l=o==B,g=u==B,d=o==u;if(d&&ae(e)){if(!ae(n))return!1;f=!0,l=!1}if(d&&!l)return s||(s=new L),f||Ie(e)?Se(e,n,t,r,a,s):Ln(e,n,o,t,r,a,s);if(!(t&Gn)){var _=l&&ce.call(e,"__wrapped__"),h=g&&ce.call(n,"__wrapped__");if(_||h){var m=_?e.value():e,v=h?n.value():n;return s||(s=new L),a(m,v,t,r,s)}}return d?(s||(s=new L),Hn(e,n,t,r,a,s)):!1}function j(e,n,t,r,a){return e===n?!0:e==null||n==null||!M(e)&&!M(n)?e!==e&&n!==n:Wn(e,n,t,r,j,a)}var Un=1,qn=2;function zn(e,n,t,r){var a=t.length,s=a,f=!r;if(e==null)return!s;for(e=Object(e);a--;){var i=t[a];if(f&&i[2]?i[1]!==e[i[0]]:!(i[0]in e))return!1}for(;++a<s;){i=t[a];var o=i[0],u=e[o],l=i[1];if(f&&i[2]){if(u===void 0&&!(o in e))return!1}else{var g=new L;if(r)var d=r(u,l,o,e,n,g);if(!(d===void 0?j(l,u,Un|qn,r,g):d))return!1}}return!0}function Pe(e){return e===e&&!q(e)}function Xn(e){for(var n=X(e),t=n.length;t--;){var r=n[t],a=e[r];n[t]=[r,a,Pe(a)]}return n}function Oe(e,n){return function(t){return t==null?!1:t[e]===n&&(n!==void 0||e in Object(t))}}function Yn(e){var n=Xn(e);return n.length==1&&n[0][2]?Oe(n[0][0],n[0][1]):function(t){return t===e||zn(t,e,n)}}function Zn(e,n){return e!=null&&n in Object(e)}function Kn(e,n,t){n=V(n,e);for(var r=-1,a=n.length,s=!1;++r<a;){var f=T(n[r]);if(!(s=e!=null&&t(e,f)))break;e=e[f]}return s||++r!=a?s:(a=e==null?0:e.length,!!a&&Be(a)&&ye(f,a)&&(y(e)||Le(e)))}function Jn(e,n){return e!=null&&Kn(e,n,Zn)}var Qn=1,Vn=2;function kn(e,n){return J(e)&&Pe(n)?Oe(T(e),n):function(t){var r=k(t,e);return r===void 0&&r===n?Jn(t,e):j(n,r,Qn|Vn)}}function jn(e){return function(n){return n==null?void 0:n[e]}}function et(e){return function(n){return Ae(n,e)}}function nt(e){return J(e)?jn(T(e)):et(e)}function tt(e){return typeof e=="function"?e:e==null?je:typeof e=="object"?y(e)?kn(e[0],e[1]):Yn(e):nt(e)}function rt(e){return function(n,t,r){for(var a=-1,s=Object(n),f=r(n),i=f.length;i--;){var o=f[e?i:++a];if(t(s[o],o,s)===!1)break}return n}}var at=rt();const st=at;function it(e,n){return e&&st(e,n,X)}var ot="[object String]";function ft(e){return typeof e=="string"||!y(e)&&M(e)&&me(e)==ot}function ut(e,n){return Ce(n,function(t){return e[t]})}function lt(e){return e==null?[]:ut(e,X(e))}function ct(e,n){var t={};return n=tt(n),it(e,function(r,a,s){Me(t,a,n(r,a,s))}),t}function dt(e,n,t,r){if(!q(e))return e;n=V(n,e);for(var a=-1,s=n.length,f=s-1,i=e;i!=null&&++a<s;){var o=T(n[a]),u=t;if(o==="__proto__"||o==="constructor"||o==="prototype")return e;if(a!=f){var l=i[o];u=r?r(l,o,i):void 0,u===void 0&&(u=q(l)?l:ye(n[a+1])?[]:{})}De(i,o,u),i=i[o]}return e}function Ee(e,n,t){return e==null?e:dt(e,n,t)}function Qt(e,n,t){t<0||t>=e.length||e.splice(t,0,e.splice(n,1)[0])}function pt(e,n){const t=n?k(e,n):e;return y(t)&&t.length>0}function gt(e=[],n=()=>!1,t="children"){let r;return _e(e).find(a=>n(a)?(r=a,!0):y(a[t])?(r=gt(a[t],n,t),r):!1),r}function ht(e){return!!e&&e.some(n=>be(n))}function be(e){return!e||e.type===qe||e.type===ze&&(!ft(e.children)||e.children.trim()==="")?!1:e.children&&Array.isArray(e.children)?e.children.some(n=>be(n)):!0}const mt=/^[v^~<>=]*?(\d+)(?:\.([x*]|\d+)(?:\.([x*]|\d+)(?:\.([x*]|\d+))?(?:-([\da-z\-]+(?:\.[\da-z\-]+)*))?(?:\+[\da-z\-]+(?:\.[\da-z\-]+)*)?)?)?$/i,de=e=>{if(typeof e!="string")throw new TypeError("Invalid argument expected string");const n=e.match(mt);if(!n)throw new Error(`Invalid argument not valid semver ('${e}' received)`);return n.shift(),n},pe=e=>e==="*"||e==="x"||e==="X",ge=e=>{const n=parseInt(e,10);return isNaN(n)?e:n},yt=(e,n)=>typeof e!=typeof n?[String(e),String(n)]:[e,n],_t=(e,n)=>{if(pe(e)||pe(n))return 0;const[t,r]=yt(ge(e),ge(n));return t>r?1:t<r?-1:0},he=(e,n)=>{for(let t=0;t<Math.max(e.length,n.length);t++){const r=_t(e[t]||"0",n[t]||"0");if(r!==0)return r}return 0},U=(e,n)=>{const t=de(e),r=de(n),a=t.pop(),s=r.pop(),f=he(t,r);return f!==0?f:a&&s?he(a.split("."),s.split(".")):a||s?a?-1:1:0};function vt({source:e,startVersion:n,targetVersion:t,migrations:r}){n="0.0.5",console.group("migrate"),console.log(`from ${n} to ${t}`);const a=Object.keys(r).sort(U),s=a.reduce((o,u,l)=>o!==-1?o:U(u,n)>0?l:o,-1);if(s<0)return console.error(`no version later than ${n}, it might be error`),e;const f=a.reduce((o,u,l)=>U(t,u)>=0?l:o,-1);if(f<0)return console.error(`no version earlier than ${t}, it might be error`),e;a.forEach((o,u)=>{u>=s&&u<=f?console.log(`✅ ${o}`):console.log(`❌ ${o}`)});let i=_e(e);for(let o=s;o<=f;o++){const u=a[o];i=r[u](i)}return console.log("migrate result:",i),console.groupEnd(),i}const wt={"0.0.14":e=>(Ee(e,"meta.version","0.0.14"),e)};function Vt({source:e,targetVersion:n}){const t=vt({migrations:wt,source:e,startVersion:e.meta.version,targetVersion:n});return Ee(t,"meta.version",n),t}const Rt="CraftImage",Ct="图片",xt=()=>we(()=>import("./Render-68b8cf57.js"),["assets/Render-68b8cf57.js","assets/props-e47be3ae.js","assets/index-b0694976.js","assets/index-9a88239b.css"]),At=()=>we(()=>import("./Config-46149409.js"),["assets/Config-46149409.js","assets/index-b0694976.js","assets/index-9a88239b.css","assets/file-9d6263df.js","assets/file-a75a0d86.css","assets/UiPanelSection.vue_vue_type_script_setup_true_lang-f85ade22.js","assets/props-e47be3ae.js"]),St={src:"https://via.placeholder.com/200x200"},Pt={},Ot=Object.freeze(Object.defineProperty({__proto__:null,componentConfigAsync:At,componentRenderAsync:xt,initialProps:St,initialSlots:Pt,name:Rt,title:Ct},Symbol.toStringTag,{value:"Module"})),Et=Object.assign({"./components/CraftImage/define.ts":Ot}),bt=lt(Et).map(e=>({componentConfigAsync:e.componentConfigAsync,componentRenderAsync:e.componentRenderAsync,initialProps:e.initialProps,initialSlots:e.initialSlots,name:e.name,title:e.title})),kt=bt;const Tt=x({name:"CraftRenderBoxContentPlaceholder",__name:"CraftRenderBoxContentPlaceholder",props:{color:{default:ve.gray[600]}},setup(e){const n=e,t=P({bottom:0,left:0,position:"absolute",right:0,top:0}),r=p(()=>({backgroundColor:n.color}));return(a,s)=>(w(),A("div",{class:O(c(t)),style:E(r.value)},null,6))}});function $t(e,{wrapperRef:n,containerRef:t}){const r=p(()=>{let i=1;switch(e.data.props.fit){case"height":i=e.sceneHeight/e.data.height;break;case"width":i=e.sceneWidth/e.data.width;break;case"contain":i=Math.min(e.sceneWidth/e.data.width,e.sceneHeight/e.data.height);break;case"cover":i=Math.max(e.sceneWidth/e.data.width,e.sceneHeight/e.data.height);break;case"source":i=1;break}return i}),a=p(()=>e.data.height*r.value),s=p(()=>e.data.width*r.value);return{containerRef:t,data:p(()=>e.data),displayHeight:a,displayWidth:s,scale:r,sceneHeight:p(()=>e.sceneHeight),sceneWidth:p(()=>e.sceneWidth),wrapperRef:n}}function It(e){const n=P({alignItems:"center",display:"flex",justifyContent:"center"}),t=p(()=>({height:`${e.displayHeight.value}px`,width:`${e.displayWidth.value}px`})),r=P({flexGrow:0,flexShrink:0,position:"relative"}),a=p(()=>({...Fe({boardProps:e.data.value.props}),height:`${e.data.value.height}px`,transform:`scale(${e.scale.value})`,transformOrigin:"center center",width:`${e.data.value.width}px`}));return Y({containerClass:r,containerStyle:a,wrapperClass:n,wrapperStyle:t})}const Bt={};function Lt(e){const n=F(),t=F(),r=$t(e,{containerRef:t,wrapperRef:n}),a=It(r);return{containerRef:t,state:r,style:a,wrapperRef:n}}const Mt=x({name:"CraftRenderBoard",__name:"CraftRenderBoard",props:Z({data:{},sceneHeight:{},sceneWidth:{}},Bt),setup(e,{expose:n}){const t=e,{wrapperRef:r,containerRef:a,style:s,state:f}=Lt(t);return n({state:f}),(i,o)=>(w(),A("div",{ref_key:"wrapperRef",ref:r,class:O(c(s).wrapperClass),style:E(c(s).wrapperStyle)},[Xe("div",{ref_key:"containerRef",ref:a,class:O(c(s).containerClass),style:E(c(s).containerStyle)},[b(i.$slots,"default")],6)],6))}});function Dt(e,{wrapperRef:n}){return{data:p(()=>e.data),wrapperRef:n}}function Ft(e){const n=P({position:"absolute"}),t=p(()=>({height:`${e.data.value.height}px`,left:`${e.data.value.left}px`,top:`${e.data.value.top}px`,width:`${e.data.value.width}px`}));return Y({wrapperClass:n,wrapperStyle:t})}const Ht={};function Gt(e){const n=F(),t=Dt(e,{wrapperRef:n}),r=Ft(t);return{state:t,style:r,wrapperRef:n}}const Nt=x({name:"CraftRenderBox",__name:"CraftRenderBox",props:Z({data:{}},Ht),setup(e,{expose:n}){const t=e,{wrapperRef:r,style:a,state:s}=Gt(t);return n({state:s}),(f,i)=>(w(),A("div",{ref_key:"wrapperRef",ref:r,class:O(c(a).wrapperClass),style:E(c(a).wrapperStyle)},[b(f.$slots,"default")],6))}}),Wt=x({name:"CraftRenderBoxContentItem",props:{components:{required:!0,type:Array},config:{required:!0,type:Object}},setup(e){const n=e.components.find(a=>a.name===e.config.name),t=Ye(()=>n&&n.componentRenderAsync?n.componentRenderAsync():Promise.resolve(null)),r=n&&n.componentRenderSync;return()=>{const a=Te({components:e.components,slots:e.config.slots});return H(r||t,e.config.props,a)}}});function Te({slots:e,components:n}){let t={};return e&&(t=ct(e,r=>()=>r.map(a=>H(Wt,{components:n,config:a,key:a.id})))),t}const Ut=x({name:"CraftRenderBoxContent",props:{box:{required:!0,type:Object},components:{required:!0,type:Array}},setup(e,{slots:n}){const t=p(()=>k(e.box,"slots")),r=p(()=>He(t.value)&&Object.keys(t.value).some(s=>pt(t.value[s]))),a=p(()=>Ge({boxProps:e.box.props}));return()=>{var f;const s=(f=n.box)==null?void 0:f.call(n,{box:e.box,id:e.box.id,name:e.box.props.name});return H("div",{class:"absolute inset-0",style:a.value},ht(s)?s:r.value?Te({components:e.components,slots:t.value}):H(Tt,{color:e.box.props.placeholderColor}))}},slots:Object}),qt=x({name:"CraftRenderScrollbar",__name:"CraftRenderScrollbar",props:{active:{type:Boolean,default:!1}},setup(e){return(n,t)=>n.active?(w(),Re(c(Ne),{key:0},{default:S(()=>[b(n.$slots,"default")]),_:3})):b(n.$slots,"default",{key:1})}});function zt(e,{wrapperRef:n}){const{width:t,height:r}=We(n);function a(i){e.inspect&&console.log(i)}const s=p(()=>{let i=!1;return e.data.scene.props.overflow==="scroll"&&e.data.scene.props.alignment==="none"&&(i=!0),i});return{components:p(()=>e.components),data:p(()=>e.data),inspect:p(()=>e.inspect),onDoubleClickBox:a,sceneHeight:r,sceneWidth:t,scrollbar:s,wrapperRef:n}}function Xt(e){const n=P({backgroundColor:ve.gray[100],height:"100%",overflow:"hidden",position:"relative",width:"100%"}),t=p(()=>Ue({sceneProps:e.data.value.scene.props}));return Y({wrapperClass:n,wrapperStyle:t})}const Yt={components:()=>[],inspect:!1};function Zt(e){const n=F(),t=zt(e,{wrapperRef:n}),r=Xt(t);return{state:t,style:r,wrapperRef:n}}const jt=x({name:"CraftRender",__name:"CraftRender",props:Z({data:{},components:{},inspect:{type:Boolean}},Yt),setup(e,{expose:n}){const t=e,{wrapperRef:r,style:a,state:s}=Zt(t);return n({state:s}),(f,i)=>(w(),A("div",{ref_key:"wrapperRef",ref:r,class:O(c(a).wrapperClass),style:E(c(a).wrapperStyle)},[N(c(qt),{active:c(s).scrollbar.value},{default:S(()=>[N(c(Mt),{data:c(s).data.value.board,"scene-height":c(s).sceneHeight.value,"scene-width":c(s).sceneWidth.value},{default:S(()=>[(w(!0),A(se,null,Ze(c(s).data.value.boxes,o=>(w(),A(se,{key:o.id},[o.props.visible?(w(),Re(c(Nt),{key:0,data:o,onDblclick:()=>c(s).onDoubleClickBox(o)},{default:S(()=>[N(c(Ut),{box:o,components:c(s).components.value},{box:S(u=>[b(f.$slots,"box",Ke(Je(u)))]),_:2},1032,["box","components"])]),_:2},1032,["data","onDblclick"])):Qe("",!0)],64))),128))]),_:3},8,["data","scene-height","scene-width"])]),_:3},8,["active"])],6))}});export{Ut as C,G as S,jt as _,tt as a,j as b,it as c,mn as d,Vt as e,gt as f,k as g,Qt as h,K as i,Ee as j,kt as k,ct as m,pt as n,wn as s};
